**所有题目均有五种语言实现。
**[C实现目录](https://renjie.blog.csdn.net/article/details/129190260 "C实现目录")** 、
**[C++ 实现目录](https://blog.csdn.net/misayaaaaa/category_12036814.html "C++
实现目录")** 、
**[Python实现目录](https://blog.csdn.net/misayaaaaa/category_12111005.html
"Python实现目录")** 、
**[Java实现目录](https://blog.csdn.net/misayaaaaa/category_12111006.html
"Java实现目录")** 、
**[JavaScript实现目录](https://blog.csdn.net/misayaaaaa/category_12199270.html
"JavaScript实现目录")****

# 题目

> 唐僧师徒四人去西天取经，一路翻山越岭。一日，师徒四人途径一个mxn长方形区域，已知  
>  1.将取经队伍作为一个整体，4人行走相同路线。  
>  2.取经队伍的起点为该长方形区域的左上角，目的地为该长方形区域的右下角  
>  3.行走路线可以向前、后、左、右四个方向前进(不允许超出该长方形区域)  
>  4.输入包含该区域的长m和宽n、前后移动允许的高度差t，以及该长方形区域内各点的高度h。  
>  5.要求该区域内相邻两次移动的高度差在高度t范围以内。取经队伍最多有3次爆发机会，每使用一次爆发机会，可以让取经队伍一次移动突破高度差限制  
>  请问取经队伍通过该区域最小的移动次数是多少?返回-1表示师徒四人无法直接通过该区域。
>
> **输入描述：**  
>  输入第一行为三个整数，分别对应为长方形场地的两条边长，和前后移动允许的高度差。三个整数之间以空格分割。  
>  后面是m行，每行n列个数据，表示长方形场地各点的高度。数据之间以空格分割。  
>  0<m，n<=200，0<t<=20  
>  每个点的高度hin满足0<=h[i,j]<=4000，0<=i<m 0<=j<n。
>
> **输出描述：**
>
> 一个整数表示通过该区域最小的移动次数。
>
> **示例1：**
>
> 输入：  
>  4 4 10  
>  10 20 30 40  
>  100 120 140 160  
>  200 230 260 290  
>  300 400 500 600  
>  输出  
>  6
>
> **示例2：**
>
> 输入  
>  1 10 1  
>  11 12 200 14 15 16 317 18 19 20  
>  输出  
>  -1

# 思路

> 1：乍一看题目很长，但是还是一个简单的DFS 问题。
>
> 2：多需要考虑的就是这个爆发问题，在高度差大于阈值的情况下，是否使用爆发能力，是一个需要考虑的条件，额外做一个分支出来考虑这种情况。

# 输入输出

>
> 1：Python输入数据主要通过`input()`函数实现，`input()`会读取控制台一行的输入，如果输入有多行的话，需要多次使用`input()`。
>  
>  
>     # 输入为: 1 2 3 4 5
>     a = input()
>     # a = '1 2 3 4 5'
>
>
> 2：与Python2中不同，Python3中的`input()`会将接受的数据返回为一个`string`类型，如果一行中有多个数据的话，则需要使用`split()`进行切割。`split()`切割后返回一个列表。
>  
>  
>     # 输入为： 1 2 3 4 5
>     a = input().split() # split()默认以空字符为分隔符，包括空格、换行(\n)、制表符(\t)等
>     # a = ['1', '2', '3', '4', '5']
>  
>     # 输入为：1,2,3,4,5
>     b = input().split(',') # 以逗号为分隔符
>     # b = ['1', '2', '3', '4', '5']
>
>
> 3：因为`input()`返回的是`string`，分割后也是一个字符列表，如果输入数据是数字则需要进行类型转换。可以单个转换或是用列表批量转换，或者是使用`map()`并行转换。`map()`函数返回的是一个迭代器，不能改变值，如果需要改变值的话还需要转换成列表
>  
>  
>     # 输入为： 1
>     a = int(input()) # 单个转换
>  
>     # 输入为：1 2 3 4 5
>     b = input().split() # b = ['1', '2', '3', '4', '5']
>     c = [int(i) for i in b] # 使用列表进行批量转换 c = [1, 2, 3, 4, 5]
>     d = [int(i) for i in input().split()] # 当然可以一步倒位
>  
>     # 使用map进行并行转换
>     e = map(int, input().split()) # 此时e是一个map迭代器，不能赋值，也不能索引
>     f = list(e) # 转换为列表，e = [1, 2, 3, 4, 5]
>     g = list(map(int, input().split())) # 一步到位

# Code

    
    
    # coding:utf-8
    #JSRUN引擎2.0，支持多达30种语言在线运行，全仿真在线交互输入输出。 
    import functools
    import collections
    import math
    from itertools import combinations
    from re import match
    
    # 处理输入
    directions=[[0,1],[0,-1],[1,0],[-1,0]]
    res=float("inf")
    sum=0
    
    #爆发能力使用次数
    count=0
    
    input_data = [int(x) for x in input().split(" ")]
    m = input_data[0]
    n= input_data[1]
    k = input_data[2]
    visited = [[0 for x in range(n)] for y in range(m)]
    matrix=[]
    for i in range(m):
        matrix.append([int(x) for x in input().split(" ")])
    
    def dfs(matrix,x,y,k):
        global sum,res,count
        m=len(matrix)
        n=len(matrix[0])
        if(x==m-1 and y==n-1):
            res=min(res,sum)
            return
        
        if(visited[x][y]):
            return
        visited[x][y]=True
        for d in directions:
            x1=x+d[0]
            y1=y+d[1]
            if(x1<0 or x1>=m or y1<0 or y1>=n):
                continue
            
            if(abs(matrix[x1][y1]-matrix[x][y])<=k):
                sum+=1
                dfs(matrix,x1,y1,k)
                sum-=1
            
            else:
                if(count>3):
                    continue
                count+=1
                sum+=1
                dfs(matrix,x1,y1,k)
                count-=1
                sum-=1
        visited[x][y]=False
        
    dfs(matrix,0,0,k)
    if res==float("inf"):
        print(-1)
    else:
        print(res)
    

## 要求

> 时间限制：C/C++ 1秒，其他语言 2秒
>
> 空间限制：C/C++262144K，其他语言524288K
>
> 64bit IO Format：%lld
>
> 语言限定：  
>  C（clang11）, C++（clang++11）, Pascal（fpc 3.0.2）, Java（javac 1.8）,
> Python2（2.7.3）,  
>  PHP(7.4.7), C#(mcs5.4), ObjC(gcc 5.4), Pythen3(3.9), JavaScript
> Node(12.18.2), JavaScript V8(6.0.0),  
>  Sqlite(3.7.9), R(4.0.3), Go(1.14.4), Ruby(2.7.1), Swift(5.3), matlab(Octave
> 5.2), Pypy2(pypy2.7.13),  
>  Pypy3(pypy3.6.1), Rust(1.44), Scala(2.11.12), Kotlin(1.4.10),
> Groovy(3.0.6), TypeScript(4.1.2), Mysql(8.0)

