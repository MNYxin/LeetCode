**所有题目均有五种语言实现。
**[C实现目录](https://renjie.blog.csdn.net/article/details/129190260 "C实现目录")** 、
** ** ** ** ** ** **[C++
实现目录](https://blog.csdn.net/misayaaaaa/category_12036814.html "C++
实现目录")************** 、 ** ** ** ** ** **
**[Python实现目录](https://blog.csdn.net/misayaaaaa/category_12111005.html
"Python实现目录")************** 、 ** ** ** ** ** **
**[Java实现目录](https://blog.csdn.net/misayaaaaa/category_12111006.html
"Java实现目录")************** 、 ** ** ** ** ** **
**[JavaScript实现目录](https://blog.csdn.net/misayaaaaa/category_12199270.html
"JavaScript实现目录")****************

# 题目

>
>     一个图像有n个像素点，存储在一个长度为n的数组img里，每个像素点的取值范围[0,255]的正整数。
>     请你给图像每个像素点值加上一个整数k（可以是负数），得到新图newImg，使得新图newImg的所有像素平均值最接近中位值128。
>     请输出这个整数k。
>
> **输入描述**
>
> n个整数，中间用空格分开
>
> 例如
>
> `0 0 0 0`
>
> 4个数值，中间用空格分开
>
> **输出描述**
>
> 一个整数k
>
> **补充说明**
>
> • 1 <= n <= 100  
>  • 如有多个整数k都满足，输出小的那个k；  
>  • 新图的像素值会自动截取到[0,255]范围。当新像素值<0，其值会更改为0；当新像素值>255，其值会更改为255；
>
> 例如newImg=”-1 -2 256″,会自动更改为”0 0 255″
>
> **示例1** 输入输出示例仅供调试，后台判题数据一般不包含示例
>
> **输入**
>
> **`0 0 0 0`**
>
> **输出**
>
> **`128`**

# 思路

> ~~1：好像也挺简单的，128 - (sum() / n) 这么一算就是结果。~~
>
> 感谢评论区 @美玉434 (JAVA 版本博客下)
> 的指正，之前思考的过于简单了，题目中补充说明里的信息还是非常重要的，涉及到很多的边界条件的判断规则！！！！
>
> 1：如有多个整数k都满足，输出小的那个k；
>
> 2：当新像素值<0，其值会更改为0；当新像素值>255，其值会更改为255；
>
> 这两个条件我之前的代码都没有考虑到，机考通过率只有30%，现在加上了已经。

# 考点

> 1：数学问题

# Code

    
    
    # coding:utf-8
    #JSRUN引擎2.0，支持多达30种语言在线运行，全仿真在线交互输入输出。 
    import functools
    import collections
    import math
    
    class TreeNode:
        def __init__(self, val=0, left=None, right=None):
            self.val = val
            self.left = left
            self.right = right
    
    def get_shorter_time(a, b):
        if (a * 10 < b):
            return a * 10
        return b
    
    #并查集模板
    class UF:
        def __init__(self, n=0):
            self.count = n
            self.item = [0 for x in range(n+1)]
            for i in range(n):
                self.item[i] = i
        def find(self, x):
            if (x != self.item[x]):
                self.item[x] = self.find(self.item[x])
                return 0
            return x
        
     
        def union_connect(self, x, y):
            x_item = self.find(x)
            y_item = self.find(y)
        
            if (x_item != y_item):
                self.item[y_item] = x_item
                self.count-=1
            
    def getCount(nums, offset):
        count = 0;
        for num in nums:
            temp = num + offset
            if (temp < 0 or temp > 255):
                count+=1
        return count
    
    def fixOffset(nums, offset, count):
        if (count == 0):
            return offset
        
        offsetOld = offset
        for num in nums:
            temp = num + offsetOld
            if (temp < 0):
                offset += temp / (len(nums) - count)
            elif (temp > 255):
                offset += (temp - 255) / (len(nums) - count)
        return fixOffset(nums, offset, getCount(nums, offset) - count)
    
     
    #处理输入
    nums = [int(x) for x in input().split(" ")]
    
    min_diff = 256
    result = -256
    
    for i in range(-127, 129):
        temp_sum = 0.0;
        for j in range(len(nums)):
            # 注意项3
            temp_sum += max(0, min(nums[j] + i, 255))
    
    
        #靠近中位数的程度
        diff = abs(float(temp_sum) / len(nums) - 128)
    
        if (diff < min_diff):
            min_diff = diff
            result = i
        elif (diff == min_diff and result != -256):
            #注意项2
            result = min(result, i)
    
    
    print(result);

## 要求：

> * * *
>
> 时间限制：C/C++ 1秒，其他语言 2秒
>
> 空间限制：C/C++262144K，其他语言524288K
>
> 64bit IO Format：%lld
>
> * * *
>
> **语言限定：**  
>  C（clang11）, C++（clang++11）, Pascal（fpc 3.0.2）, Java（javac 1.8）,
> Python2（2.7.3）,  
>  PHP(7.4.7), C#(mcs5.4), ObjC(gcc 5.4), Pythen3(3.9), JavaScript
> Node(12.18.2), JavaScript V8(6.0.0),  
>  Sqlite(3.7.9), R(4.0.3), Go(1.14.4), Ruby(2.7.1), Swift(5.3), matlab(Octave
> 5.2), Pypy2(pypy2.7.13),  
>  Pypy3(pypy3.6.1), Rust(1.44), Scala(2.11.12), Kotlin(1.4.10),
> Groovy(3.0.6), TypeScript(4.1.2), Mysql(8.0)

