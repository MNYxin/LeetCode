**目录**

题目

思路

Code

* * *

## 题目

> 两端通过TLV格式的报文来通信，现在收到对端的一个TLV格式的消息包，要求生成匹配后的(tag,length,valueOffset)列表。  
>  具体要求如下:  
>  (1)消息包中多组tag、length、value紧密排列，其中tag,length各占1字节(uint8
> t),value所占字节数等于length的值
>
>
> (2)结果数组中tag值已知，需要填充每个tag对应数据的length和valueOffset值(valueOffset为value在原消息包中的起始偏移量
> (从0开始，以字节为单位))，  
>
> 即将消息包中的tag与结果数组中的tag进行匹配(可能存在匹配失败的情况，若结果数组中的tag在消息包中找不到，则ength和valueOffset都为0)  
>  (3)消息包和结果数组中的tag值都按升序排列，且不重复
>
> (4)此消息包未被篡改，但尾部可能不完整，不完整的一组TLV请丢弃掉  
>  **输入描述**  
>  第一行: 一个字符串，代表收到的消息包。字符串长度在10000以内。  
>  。说明1:
> 字符串使用十六进制文本格式(字母为大写)来展示消息包的数据，如0F04ABABABAB代表一组TLV:前两个字符(0F)代表tag值为15，接下来两个字符
> (04)代表length值为4字节，接下来8个字符即为4字节的value。说明2: 输入字符串中，每一组TLV紧密排列，中间无空格等分隔符  
>  第二行: 需要匹配的tag数量n (0 < n <1000).  
>  后面n行: 需要匹配的n个tag值 (十进制表示)，递增排列。  
>  **输出描述**  
>  和需要匹配的n个tag对应的n行匹配结果，每一行由长度和偏移量组成  
>  **示例1：**
>
> **输入**  
>  0F04ABABABAB
>
> 1  
>  15  
>  **输出**
>
> 4 2  
>  说明  
>  tag15(十六进制OF)对应数据的长度为4，其value从第三个字节开始，因此偏移量为2
>
> **示例2：**
>
> **输入**
>
> 0F04ABABABAB1001FF
>
> 2  
>  15
>
> 17  
>  **输出**
>
> 4 2  
>  0 0  
>  说明  
>  第二个tag匹配失败

# 思路

> 见代码注释

# ![](https://img-blog.csdnimg.cn/42eca8c5691144f2a9511821b795bf3e.jpeg)

# Code

    
    
    # coding:utf-8
    #JSRUN引擎2.0，支持多达30种语言在线运行，全仿真在线交互输入输出。 
    import functools
    import sys
    from collections import Counter, defaultdict
    import copy
    from itertools import permutations
    import re
    import math
    import sys
    import bisect
     
    # 定义变量并读取输入
    msg = input()
    n = int(input())
    
    tags = []
    for i in range(n):
        tags.append(int(input()))
    
    # 定义哈希表，存储tag对应的length和valueOffset
    tagMap = defaultdict(list)
    
    # 解析msg，填充哈希表
    for i in range(len(msg) - 3):
        tagStr = msg[i:i+2]
        lenStr = msg[i+2:i+4]
    
        # 将16进制字符串转换为整数
        tag = int(tagStr, 16)
        length = int(lenStr, 16)
    
        # 计算valueOffset
        valueOffset = (i + 5) // 2
    
        # 跳过value，更新i
        i += 3 + length * 2
    
        # 如果i超出msg长度，跳出循环
        if i >= len(msg):
            break
    
        # 将tag、length、valueOffset存入哈希表中
        tagMap[tag] = [length, valueOffset]
    
    # 遍历tags，输出匹配结果
    for tag in tags:
        if tag in tagMap:
            tmp = tagMap[tag]
            length = tmp[0]
            valueOffset = tmp[1]
            print(length, valueOffset)
        else:
            print(0, 0)
    

##

> **【华为od机试真题Python+JS+Java合集】【超值优惠】：
> **[Py/JS/Java合集](https://blog.csdn.net/misayaaaaa/category_12258991.html
> "Py/JS/Java合集")****
>
> **【华为od机试真题Python】：
> **[Python真题题库](https://blog.csdn.net/misayaaaaa/category_12111005.html
> "Python真题题库")****
>
> **【华为od机试真题JavaScript】：
> **[JavaScript真题题库](https://blog.csdn.net/misayaaaaa/category_12199270.html
> "JavaScript真题题库")****
>
> **【华为od机试真题Java】：
> **[Java真题题库](https://blog.csdn.net/misayaaaaa/category_12111006.html
> "Java真题题库")****
>
> **【华为od机试真题C++】：
> **[C++真题题库](https://blog.csdn.net/misayaaaaa/category_12036814.html
> "C++真题题库")****
>
> **【华为od机试真题C语言】：
> **[C语言真题题库](https://blog.csdn.net/misayaaaaa/category_12217917.html
> "C语言真题题库")****
>
> **【华为od面试手撕代码题库】：
> **[面试手撕代码题库](https://renjie.blog.csdn.net/article/details/130419388
> "面试手撕代码题库")****
>
> **【华为od机试面试交流群：830285880】**

