>
> 某购物城有m个商铺，现决定举办一场活动选出人气最高店铺。活动共有n位市民参与，每位市民只能投一票，但1号店铺如果给该市民发放q元的购物补贴，该市民会改为投1号店铺。  
>  请计算1号店铺需要最少发放多少元购物补贴才能成为人气最高店铺(即获得的票数要大于其他店铺)，如果1号店铺本身就是票数最高店铺，返回0。  
>  **输入描述:**  
>  第一行为小写逗号分割的两个整数n，m，其中第一个整数n表示参与的市民总数，第二个整数m代表店铺总数，1<= n, m <= 3000.  
>
> 第2到n+1行，每行为小写逗号分割的两个整数p，q，表示市民的意向投票情况，其中每行的第一个整数p表示该市民意向投票给p号店铺，第二个整数q表示其改投1号店铺所需给予的q元购物补贴，1
> <= p <= m,1<= q <= 10^9.不考虑输入的格式问题  
>  **输出描述**  
>  1号店铺需要最少发放购物补贴金额。
>
> **示例1  
>  输入:**  
>  5,5  
>  2,10  
>  3,20  
>  4,30  
>  5,40  
>  5,90  
>  **输出:**  
>  50  
>  **说明:**  
>  有5个人参与，共5个店铺。  
>  如果选择发放 10元+20元+30元=60元 的补贴来抢2.3.4号店铺的票，总共发放了60元补贴
>
> **(5号店铺有2票，1号店铺要3票才能胜出)**
>
> 如果选择发放 10元+40元=50元 的补贴来抢2.5号店铺的票，总共发放了50元补贴
>
> **(抢了5号店铺的票后，现在1号店铺只要2票就能胜出)**
>
> 所以最少发放50元补贴
>
> **示例2  
>  输入:**  
>  5,5  
>  2,10  
>  3,20  
>  4,30  
>  5,80  
>  5,90  
>  **输出:**  
>  60  
>  **说明:**  
>  有5个人参与，共5个店铺.  
>  如果选择发放 10元+20元+30元=60元 的补贴来抢2.3.4号店铺的票，总共发放了60元补贴 **(5号店铺有2票，1号店铺要3票才能胜出)**
>
> 如果选择发放 10元+80元=90元 的补贴来抢2,5号店铺的票，总共发放了90元补贴 **(抢了5号店铺的票后，现在1号店铺只要2票就能胜出)**
> 所以最少发放60元补贴  
> ![](https://img-blog.csdnimg.cn/e66d4892849a4f96811f6ac4f854e5e6.webp)

# 思路

> 1：其实就是考察动态的排序规则，首先按照店铺的id进行计数，统计每个店铺初始有多少票。
>
> 2：但是只要1号店铺发和其他店铺一样的钱，这个人就会改投1号，涉及到一号店铺加，另一个店铺减。
>
> 3：可以通过回溯遍历的方式，让一号店铺对后续的投票情况进行排列组合，从中选出最小的补贴方式。

# ![](https://img-blog.csdnimg.cn/42eca8c5691144f2a9511821b795bf3e.jpeg)

# Code

    
    
    import functools
    import collections
    import math
    from itertools import combinations
    from re import match
    import copy 
    from collections import defaultdict
    
    money = 0
    result = float('inf')
    
    def backfill( peoples,change_peoples, index, shop_info):
        global result, money
        # 判断此时一号店铺是否是第一名,且所需要的钱最少
        if(check(change_peoples,shop_info) and result > money):
            result = money
        else :
            # 组合求解
            for i in range(index, len(peoples)):
                change_peoples.append(peoples[i])
                backfill(peoples, change_peoples, i+1,shop_info)
                change_peoples.pop(len(change_peoples) - 1) 
     
    def check(change_peoples, shop_info):
        global money
        new_shop_info = copy.copy(shop_info)
        money = 0
        for ints in change_peoples:
            shop_id = ints[0]
            money += ints[1]
            # 人气调换
            new_shop_info[shop_id]-=1
            new_shop_info[1]+=1
        
    
        shop_list = []
        for key in new_shop_info:
            shop_list.append([key, new_shop_info[key]])
        # 降序排序
        shop_list.sort(key=lambda x: -x[1])
    
        # 人气第一的店铺
        top1_shop_id = shop_list[0][0]
        if(top1_shop_id == 1 and (len(shop_list) == 1 or shop_list[0][1] > shop_list[1][1])):
            return True
        
    
        return False
        
     
    params = [int(x) for x in input().split(",")]
    n = params[0]
    m = params[1]
    # 初始化商店和投票人
    peoples = []
    shop_info = {}
    shop_info[1]= 0
    for i in range(n):
        nums = [int(x) for x in input().split(",")]
        if(nums[0] != 1):
            peoples.append(nums)
        if nums[0] not in shop_info:
            shop_info[nums[0]] = 1
        else:
            shop_info[nums[0]] += 1
    
    backfill(peoples, [], 0, shop_info)
    print(result)

##

> **【华为od机试真题Python+JS+Java合集】【超值优惠】：
> **[Py/JS/Java合集](https://blog.csdn.net/misayaaaaa/category_12258991.html
> "Py/JS/Java合集")****
>
> **【华为od机试真题Python】：
> **[Python真题题库](https://blog.csdn.net/misayaaaaa/category_12111005.html
> "Python真题题库")****
>
> **【华为od机试真题JavaScript】：
> **[JavaScript真题题库](https://blog.csdn.net/misayaaaaa/category_12199270.html
> "JavaScript真题题库")****
>
> **【华为od机试真题Java】：
> **[Java真题题库](https://blog.csdn.net/misayaaaaa/category_12111006.html
> "Java真题题库")****
>
> **【华为od机试真题C++】：
> **[C++真题题库](https://blog.csdn.net/misayaaaaa/category_12036814.html
> "C++真题题库")****
>
> **【华为od机试真题C语言】：
> **[C语言真题题库](https://blog.csdn.net/misayaaaaa/category_12217917.html
> "C语言真题题库")****
>
> **【华为od面试手撕代码题库】：
> **[面试手撕代码题库](https://renjie.blog.csdn.net/article/details/130419388
> "面试手撕代码题库")****
>
> **【华为od机试面试交流群：830285880】**

