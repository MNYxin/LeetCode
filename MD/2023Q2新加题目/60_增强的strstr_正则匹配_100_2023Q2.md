**目录**

题目

思路

Code

* * *

## 题目

> c 语言有一个库函数: char*strstr(const char *haystack, const char*needle)，实现在字符串
> haystack 中查找第一次出现字符串 needle 的位置，如果未找到则返回 null。  
>  现要求实现一个strstr的增强函数，可以使用带可选段的字符串来模糊查询，与strstr一样返回首次查找到的字符串位置。  
>  可选段使用“[]"标识，表示该位置是可选段中任意一个字符即可满足匹配条件。比如"a[bc]"表示可以匹配"ab”或“ac”  
>  注意目标字符串中可选段可能出现多次  
>  **输入描述**  
>  与strstr函数一样，输入参数是两个字符串指针，分别是源字符串和目标字符串  
>  **输出描述**  
>  与strstr函数不同，返回的是源字符串中，匹配子字符串相对于源字符串地址的偏移 (从0开始算)，如果没有匹配返回-1。  
>  补充说明: 源字符串中必定不包含"[]”，目标字符串中”[]"必定成对出现，且不会出现嵌套。  
>  输入的字符串长度在[1,100]之间。  
>  **示例1：  
>  输入：**  
>  abcd  
>  b[cd]  
>  **输出**
>
> 1  
>  **说明**  
>  相当于是在源字符串中查找bc或者bd，bc子字符串相对于abcd的偏移是1
>
> ![](https://img-blog.csdnimg.cn/e84bdc9d92aa4dcdb85c3bc488e03561.jpeg)

# 思路

> 1：涉及到匹配的策略，是一个正则匹配类的题目。不熟悉正则匹配的同学可以参考：[正则表达式 – 教程 |
> 菜鸟教程](https://www.runoob.com/regexp/regexp-tutorial.html "正则表达式 – 教程 |
> 菜鸟教程")
>
> 2：题目中的[]就是正则中的
>
>   * 字符类：用方括号 `[ ]` 包围的字符集合，用于匹配方括号内的任意一个字符。![](https://img-
> blog.csdnimg.cn/c1131b7231c64b21aec0d578697f281e.png)
>
>

# ![](https://img-blog.csdnimg.cn/42eca8c5691144f2a9511821b795bf3e.jpeg)

# Code

    
    
    # coding:utf-8
    #JSRUN引擎2.0，支持多达30种语言在线运行，全仿真在线交互输入输出。 
    import functools
    import sys
    from collections import Counter, defaultdict
    import copy
    from itertools import permutations
    import re
    import math
    import sys
     
    str1 = input()
    str2 = input()
    str2 = re.sub(r'\[(.*?)\]', r'[\1]', str2)
    pattern = re.compile(str2)
    if pattern.search(str1) is None:
        print(-1)
    else:
        print(pattern.search(str1).start())
    
    

##

> **【华为od机试真题Python+JS+Java合集】【超值优惠】：
> **[Py/JS/Java合集](https://blog.csdn.net/misayaaaaa/category_12258991.html
> "Py/JS/Java合集")****
>
> **【华为od机试真题Python】：
> **[Python真题题库](https://blog.csdn.net/misayaaaaa/category_12111005.html
> "Python真题题库")****
>
> **【华为od机试真题JavaScript】：
> **[JavaScript真题题库](https://blog.csdn.net/misayaaaaa/category_12199270.html
> "JavaScript真题题库")****
>
> **【华为od机试真题Java】：
> **[Java真题题库](https://blog.csdn.net/misayaaaaa/category_12111006.html
> "Java真题题库")****
>
> **【华为od机试真题C++】：
> **[C++真题题库](https://blog.csdn.net/misayaaaaa/category_12036814.html
> "C++真题题库")****
>
> **【华为od机试真题C语言】：
> **[C语言真题题库](https://blog.csdn.net/misayaaaaa/category_12217917.html
> "C语言真题题库")****
>
> **【华为od面试手撕代码题库】：
> **[面试手撕代码题库](https://renjie.blog.csdn.net/article/details/130419388
> "面试手撕代码题库")****
>
> **【华为od机试面试交流群：830285880】**

