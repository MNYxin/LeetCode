## 题目

> 给定一个输入字符串，字符串只可能由英文字母 (a ~z、A~ Z ) 和左右小括号 (、)
> 组成当字符里存在小括号时，小括号是成对的，可以有一个或多个小括号对，小括号对不会嵌套，小括号对内可以包含1个或多个英文字母也可以不包含英文字母。当小括号对内包含多个英文字母时，这些字母之间是相互等效的关系，而且等效关系可以在不同的小括号对之间传递，即当存在a和b等效和存在b和c等效时，
> a和c 也等效，另外，同一个英文字母的大写字和小写字母也相互等效(即使它们分布在不同的括号对里)  
>
> 要对这个输入字符串做简化，输出一个新的字符串，输出字符串里只需保留输入字符串里的没有被小括号对包含的字符(按照输入字符串里的字符顺序)，并将每个字符替换为在小括号对里包含的目字典序最小的等效字符。如果简化后的字符串为空，请输出为”0”  
>
> 示例:输入字符串为"never(dont)live(run)up(f)()"，初始等效字符集合为(d,o,n,t)、r,u,n)，由于等效关系可以传递，因此最终等效字符集合为(d,o,n,t,r,u)，将输入字符串里的剩余部分按字典序最小的等效字符替换后得到"devedgivedp  
>  **输入描述**  
>  input string  
>  输入为1行，代表输入字符串
>
> **输出描述**  
>  output string  
>  输出为1行，代表输出字符串  
>  备注  
>  输入字符串的长度在1~100000之间
>
> **示例1：**
>
> 输入：
>
> ()abd  
>  输出：
>
> abd  
>  说明：  
>  输入字符串里没有被小括号包含的了字符串为"abd"，其中每个字符没有等效字符，输出为"abd"
>
> **示例2：**
>
> 输入：
>
> (abd)demand(fb)()for
>
> 输出：
>
> aemanaaor
>
> 说明：  
>
> 等效字符集为(a，b，d，f)，输入字符串里没有被小括号包含的了字符串集合为'demandfor”，将其中字符替换为字典序最小的等效字符后输出为:"aemanaaor
>
> **示例3：**
>
> 输入：
>
> happy(xyz)new(wxy)year(t)
>
> 输出：  
>  happwnewwear
>
> 说明：  
>
> 等效字符集为(x，y,z，w)，输入字符串里没有被小括号包含的了字符串集合为"happynewyear”，将其中字符替换为字典序最小的等效字等后输出为:"happwnewwear

# 思路

> 1：首先题目很长，但是通读之后就知道，目的就在于处理括号中的等效字符。
>
> 2：第一步将括号中的字符全部抽取出来，然后就是对其他字符进行等效替换和合并操作。比较麻烦，但绝对不是难题。

#

# Code

    
    
    def check(group1, group2):
        for c in range(ord('a'), ord('z') + 1):
            if (chr(c) in group1 or chr(c - 32) in group1):
                if (chr(c) in group2 or chr(c - 32) in group2):
                    return True
        return False
    
    str = input().strip()
    output_container = ""
    same_chars = []
    
    flags = False
    i = 0
    while(True):
        if(i>=len(str)):
            break
        else:
            if str[i] == '(':
                flags = True
                new_set = set([])
                same_chars.append(new_set)
            elif str[i] == '{':
                i+=1
                continue
            elif str[i] == '}':
                i+=1
                continue
            elif str[i] == ')':
                flags = False
                if len(same_chars[-1]) == 0:
                    same_chars.pop()  
            else:
                if not flags:
                    output_container += str[i]
                else:
                    same_chars[-1].add(str[i])
        i+=1
    
    while True:
        length = len(same_chars)
        for i in range(length):
            for j in range(i + 1, length):
                if check(same_chars[i], same_chars[j]):
                    same_chars[i].update(same_chars[j])
                    same_chars.pop(j)
                    break
            else:
                continue
            break
        else:
            break
    
    chars = []
    for single_char in output_container:
        chars.append(single_char)
    
    for same_char in same_chars:
        temp = sorted(list(same_char), key=lambda x:x, reverse=False)
        for i in range(len(output_container)):
            if chars[i] in same_char:
                chars[i] = temp[0]
            else:
                continue
    
    output_str = "0"
    if len(chars) != 0:
        output_str = "".join(chars)
        if output_str == "":
            output_str = "0"
    print(output_str)

## 要求

> 时间限制：C/C++ 1秒，其他语言 2秒
>
> 空间限制：C/C++262144K，其他语言524288K
>
> 64bit IO Format：%lld
>
> 语言限定：  
>  C（clang11）, C++（clang++11）, Pascal（fpc 3.0.2）, Java（javac 1.8）,
> Python2（2.7.3）,  
>  PHP(7.4.7), C#(mcs5.4), ObjC(gcc 5.4), Pythen3(3.9), JavaScript
> Node(12.18.2), JavaScript V8(6.0.0),  
>  Sqlite(3.7.9), R(4.0.3), Go(1.14.4), Ruby(2.7.1), Swift(5.3), matlab(Octave
> 5.2), Pypy2(pypy2.7.13),  
>  Pypy3(pypy3.6.1), Rust(1.44), Scala(2.11.12), Kotlin(1.4.10),
> Groovy(3.0.6), TypeScript(4.1.2), Mysql(8.0)

